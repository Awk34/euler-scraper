##Best Approximations

Let <var>x</var> be a real number.<br>
A <i>best approximation</i> to <var>x</var> for the <i>denominator bound</i> <var>d</var> is a rational number <var>r</var>/<var>s</var> <i>in reduced form</i>, with <var>s</var> &#x2264; <var>d</var>, such that any rational number which is closer to <var>x</var> than <var>r</var>/<var>s</var> has a denominator larger than <var>d</var>:

For example, the best approximation to &#x221A;13 for the denominator bound 20 is 18/5 and the best approximation to &#x221A;13 for the denominator bound 30 is 101/28.

Find the sum of all denominators of the best approximations to &#x221A;<var>n</var> for the denominator bound 10<sup>12</sup>, where <var>n</var> is not a perfect square and 1 &lt; <var>n</var> &#x2264; 100000.
